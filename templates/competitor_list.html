{% extends "base.html" %}

{% block title %}Competidores{% endblock %}

{% block content %}

<div class="page-header">

    <div class="page-left">
        <img 
            src="https://i.pinimg.com/736x/05/b9/e4/05b9e43b61a8fd186cea354f2454a1a7.jpg"
            class="side-icon competitors"
            alt="competitor icon">

        <h1 class="page-title">Listado de Competidores</h1>
    </div>

    <a href="/competitors/new" class="btn-box-create">â• Crear competidor</a>
</div>

{% if competitors %}
<table class="table-rubik">

    <thead>
        <tr>
            <th>ID</th>
            <th>Foto</th>
            <th>Nombre</th>
            <th>PaÃ­s</th>
            <th>Tiempo promedio</th>
            <th>Cubo</th>
            <th>Torneo</th>
            <th>Acciones</th>
        </tr>
    </thead>

    <tbody>
        {% for c in competitors %}
        <tr>
            <td>{{ c.id }}</td>

            <td>
                {% if c.image_url %}
                    <img src="{{ c.image_url }}"
                         style="
                            width: 70px;
                            height: 70px;
                            border-radius: 50%;
                            object-fit: cover;
                            border: 3px solid rgba(0,255,255,.35);
                            box-shadow: 0 0 16px rgba(0,255,255,.25);
                         ">
                {% else %}
                    <span style="opacity: .4;">ğŸ“·</span>
                {% endif %}
            </td>

            <td>{{ c.name }}</td>
            <td>{{ c.country }}</td>
            <td>{{ c.average_time }}</td>
            <td>{{ c.cube.brand if c.cube else "â€”" }}</td>
            <td>{{ c.tournament.name if c.tournament else "â€”" }}</td>

            <td class="actions">
                <a class="btn-edit" href="/competitors/{{ c.id }}/edit">âœï¸ Editar</a>

                <form method="post" action="/competitors/{{ c.id }}/delete"
                      onsubmit="return confirm('Â¿Eliminar competidor?')">
                    <button class="btn-delete" type="submit">ğŸ—‘ï¸ Eliminar</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>

</table>

{% else %}
<p class="empty-msg">No hay competidores registrados aÃºn.</p>
{% endif %}

{% endblock %}
